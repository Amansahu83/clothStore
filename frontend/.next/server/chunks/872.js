"use strict";exports.id=872,exports.ids=[872],exports.modules={7872:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>AdminNotifications});var i=a(997),r=a(6689),l=a(9185),n=a(169),o=e([l]);function AdminNotifications(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=(0,n.PR)();e&&(0,n.GJ)()&&initializeNotifications()},[]);let initializeNotifications=async()=>{try{let e=localStorage.getItem("lastNotificationCheck"),t=Date.now();e?c(parseInt(e)):(c(t),localStorage.setItem("lastNotificationCheck",t.toString())),m(!0);let a=setInterval(checkForNewOrders,3e4);return()=>clearInterval(a)}catch(e){console.error("Error initializing notifications:",e)}},checkForNewOrders=async()=>{try{let e=(0,n.PR)();if(!e||!(0,n.GJ)()||!d||!o)return;let a=await l.A6.getAllAdmin(),s=a.data.filter(e=>new Date(e.created_at).getTime()>o);if(s.length>0){let e=s.map(e=>({id:e.id,message:`New order #${e.id} from ${e.user_name}`,amount:e.total_amount,timestamp:new Date(e.created_at)}));t(t=>[...e,...t].slice(0,10));let a=Date.now();c(a),localStorage.setItem("lastNotificationCheck",a.toString())}}catch(e){console.error("Error checking for new orders:",e)}};return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>s(!a),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:["\uD83D\uDD14",e.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:e.length})]}),a&&(0,i.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border z-50",children:[i.jsx("div",{className:"p-4 border-b",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDD14 Notifications"}),e.length>0&&i.jsx("button",{onClick:()=>{t([]),s(!1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all"})]})}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:0===e.length?(0,i.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[i.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDD15"}),i.jsx("p",{children:"No new notifications"})]}):e.map(e=>(0,i.jsxs)("div",{className:"p-4 border-b hover:bg-gray-50",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.message}),(0,i.jsxs)("p",{className:"text-sm text-green-600 font-semibold",children:["\uD83D\uDCB0 $",parseFloat(e.amount).toFixed(2)]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.timestamp.toLocaleTimeString()})]},e.id))})]})]})}l=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})}};