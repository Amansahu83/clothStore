(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{8195:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(2406)}])},2406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AdminDashboard}});var s=r(5893),a=r(7294),l=r(1163),o=r(1664),n=r.n(o),c=r(9185),d=r(169);function AdminDashboard(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[i,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[b,p]=(0,a.useState)({name:"",description:"",price:"",category:"",size:"",color:"",stock_quantity:""}),[h,g]=(0,a.useState)(null),f=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=(0,d.PR)();if(!e||!(0,d.GJ)()){f.push("/");return}fetchProducts()},[]);let fetchProducts=async()=>{try{let e=await c.RB.getAll();t(e.data)}catch(e){console.error("Error fetching products:",e)}finally{o(!1)}},handleSubmit=async e=>{e.preventDefault();let t=new FormData;Object.keys(b).forEach(e=>{t.append(e,b[e])}),h&&t.append("image",h);try{m?await c.RB.update(m.id,t):await c.RB.create(t),u(!1),x(null),p({name:"",description:"",price:"",category:"",size:"",color:"",stock_quantity:""}),g(null),fetchProducts()}catch(e){var r,s;alert((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.error)||"Failed to save product")}},handleEdit=e=>{x(e),p({name:e.name,description:e.description,price:e.price,category:e.category,size:e.size,color:e.color,stock_quantity:e.stock_quantity}),u(!0)},handleDelete=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await c.RB.delete(e),fetchProducts()}catch(e){var t,r;alert((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to delete product")}};return r?(0,s.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold gradient-text",children:"⚙️ Admin Dashboard"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(n(),{href:"/admin/orders",className:"btn-secondary",children:"\uD83D\uDCE6 Orders"}),(0,s.jsx)(n(),{href:"/admin/revenue",className:"btn-secondary",children:"\uD83D\uDCB0 Revenue"}),(0,s.jsx)("button",{onClick:()=>u(!0),className:"btn-primary",children:"➕ Add Product"})]})]}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:m?"Edit Product":"Add Product"}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name"}),(0,s.jsx)("input",{type:"text",value:b.name,onChange:e=>p({...b,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:b.description,onChange:e=>p({...b,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",rows:"3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Price"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:b.price,onChange:e=>p({...b,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Stock"}),(0,s.jsx)("input",{type:"number",value:b.stock_quantity,onChange:e=>p({...b,stock_quantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Category"}),(0,s.jsx)("input",{type:"text",value:b.category,onChange:e=>p({...b,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Size"}),(0,s.jsx)("input",{type:"text",value:b.size,onChange:e=>p({...b,size:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Color"}),(0,s.jsx)("input",{type:"text",value:b.color,onChange:e=>p({...b,color:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>g(e.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{u(!1),x(null),p({name:"",description:"",price:"",category:"",size:"",color:"",stock_quantity:""}),g(null)},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:[m?"Update":"Add"," Product"]})]})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.image_url&&(0,s.jsx)("img",{src:"https://clothstore-98w2.onrender.com".concat(e.image_url),alt:e.name,className:"w-full h-48 object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",e.price]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Stock: ",e.stock_quantity]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Size: ",e.size]}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Color: ",e.color]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>handleEdit(e),className:"flex-1 bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600",children:"✏️ Edit"}),(0,s.jsx)("button",{onClick:()=>handleDelete(e.id),className:"flex-1 bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",children:"\uD83D\uDDD1️ Delete"})]})]})]},e.id))})]})}},9185:function(e,t,r){"use strict";r.d(t,{A6:function(){return n},I8:function(){return l},RB:function(){return o}});var s=r(7066);let a=s.Z.create({baseURL:"https://clothstore-98w2.onrender.com/api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l={login:e=>a.post("/auth/login",e),register:e=>a.post("/auth/register",e)},o={getAll:()=>a.get("/products"),getById:e=>a.get("/products/".concat(e)),create:e=>a.post("/products",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>a.put("/products/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>a.delete("/products/".concat(e))},n={create:e=>a.post("/orders",e),getAll:()=>a.get("/orders"),getAllAdmin:()=>a.get("/orders/admin/all"),getRevenue:()=>a.get("/orders/admin/revenue"),updateStatus:(e,t)=>a.put("/orders/".concat(e,"/status"),{status:t}),cancel:e=>a.put("/orders/".concat(e,"/cancel"))}},1163:function(e,t,r){e.exports=r(9974)}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=8195)}),_N_E=e.O()}]);