(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return s(9832)}])},9832:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Cart}});var r=s(5893),a=s(7294),l=s(1163),n=s(1664),i=s.n(n),c=s(9185),d=s(169);function Cart(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[o,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),h=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("cart")||"[]");t(e)},[]);let updateQuantity=(s,r)=>{if(0===r){removeFromCart(s);return}let a=e.map(e=>e.id===s?{...e,quantity:r}:e);t(a),localStorage.setItem("cart",JSON.stringify(a))},removeFromCart=s=>{let r=e.filter(e=>e.id!==s);t(r),localStorage.setItem("cart",JSON.stringify(r))},getTotalPrice=()=>e.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2),getTotalItems=()=>e.reduce((e,t)=>e+t.quantity,0),handleCheckout=async()=>{let t=(0,d.PR)();if(!t){h.push("/login");return}if(!o.trim()){alert("Please enter shipping address");return}n(!0);try{let t={items:e.map(e=>({product_id:e.id,quantity:e.quantity})),shipping_address:o};await c.A6.create(t),localStorage.removeItem("cart"),x(!0),setTimeout(()=>h.push("/orders"),2e3)}catch(e){var s,r;alert((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)||"Failed to place order")}finally{n(!1)}};return 0===e.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-8xl mb-6",children:"\uD83D\uDED2"}),(0,r.jsx)("h1",{className:"text-3xl font-bold gradient-text mb-4",children:"Your Cart is Empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't added anything to your cart yet!"}),(0,r.jsx)(i(),{href:"/",className:"btn-primary inline-block",children:"\uD83D\uDECD️ Start Shopping"})]}):m?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-8xl mb-6",children:"\uD83C\uDF89"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-green-600 mb-4",children:"Order Placed Successfully!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Thank you for your purchase. Redirecting to your orders..."}),(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"\uD83D\uDED2 Shopping Cart"}),(0,r.jsxs)("p",{className:"text-gray-600",children:[getTotalItems()," items in your cart"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2 space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.image_url?(0,r.jsx)("img",{src:"https://clothstore-98w2.onrender.com".concat(e.image_url),alt:e.name,className:"w-24 h-24 object-cover rounded-lg"}):(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC55"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-600 mb-2",children:["$",e.price]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Size: ",e.size]}),(0,r.jsxs)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:["Color: ",e.color]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-2",children:[(0,r.jsx)("button",{onClick:()=>updateQuantity(e.id,e.quantity-1),className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:"−"}),(0,r.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>updateQuantity(e.id,e.quantity+1),className:"w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:"+"})]}),(0,r.jsx)("button",{onClick:()=>removeFromCart(e.id),className:"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors",title:"Remove item",children:"\uD83D\uDDD1️"})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,r.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]})})]},e.id))}),(0,r.jsxs)("div",{className:"card p-6 h-fit sticky top-24",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDCCA Order Summary"}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Items (",getTotalItems(),"):"]}),(0,r.jsxs)("span",{className:"font-semibold",children:["$",getTotalPrice()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping:"}),(0,r.jsx)("span",{className:"font-semibold text-green-600",children:"FREE"})]}),(0,r.jsx)("div",{className:"border-t pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{className:"text-green-600",children:["$",getTotalPrice()]})]})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 font-semibold mb-3",children:"\uD83D\uDCE6 Shipping Address"}),(0,r.jsx)("textarea",{value:o,onChange:e=>u(e.target.value),className:"input-field",rows:"4",placeholder:"Enter your complete shipping address...",required:!0})]}),(0,r.jsx)("button",{onClick:handleCheckout,disabled:s||!o.trim(),className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 px-6 rounded-lg font-semibold shadow-lg hover:from-green-600 hover:to-green-700 transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"animate-spin mr-2",children:"⏳"}),"Processing Order..."]}):"\uD83D\uDE80 Place Order"}),(0,r.jsx)("div",{className:"mt-4 text-center text-sm text-gray-500",children:"\uD83D\uDD12 Secure checkout powered by ClothStore"})]})]})]})}},9185:function(e,t,s){"use strict";s.d(t,{A6:function(){return i},I8:function(){return l},RB:function(){return n}});var r=s(7066);let a=r.Z.create({baseURL:"https://clothstore-98w2.onrender.com/api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l={login:e=>a.post("/auth/login",e),register:e=>a.post("/auth/register",e)},n={getAll:()=>a.get("/products"),getById:e=>a.get("/products/".concat(e)),create:e=>a.post("/products",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>a.put("/products/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>a.delete("/products/".concat(e))},i={create:e=>a.post("/orders",e),getAll:()=>a.get("/orders"),getAllAdmin:()=>a.get("/orders/admin/all"),getRevenue:()=>a.get("/orders/admin/revenue"),updateStatus:(e,t)=>a.put("/orders/".concat(e,"/status"),{status:t}),cancel:e=>a.put("/orders/".concat(e,"/cancel"))}},1163:function(e,t,s){e.exports=s(9974)}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=8086)}),_N_E=e.O()}]);