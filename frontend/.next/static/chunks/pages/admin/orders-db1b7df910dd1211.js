(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{6376:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return s(8910)}])},8910:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminOrders}});var r=s(5893),a=s(7294),n=s(1163),l=s(9185),d=s(169);function AdminOrders(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[c,o]=(0,a.useState)("all"),u=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=(0,d.PR)();if(!e||!(0,d.GJ)()){u.push("/");return}fetchOrders()},[]);let fetchOrders=async()=>{try{let e=await l.A6.getAllAdmin();t(e.data)}catch(e){console.error("Error fetching orders:",e)}finally{i(!1)}},updateOrderStatus=async(e,t)=>{try{await l.A6.updateStatus(e,t),fetchOrders()}catch(e){var s,r;alert((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)||"Failed to update order status")}},p=e.filter(e=>"all"===c||e.status===c),getStatusColor=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading orders..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold gradient-text",children:"\uD83D\uDCE6 Order Management"}),(0,r.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"input-field w-48",children:[(0,r.jsx)("option",{value:"all",children:"All Orders"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:p.map(e=>(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-bold mb-2",children:["Order #",e.id]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["\uD83D\uDC64 ",e.user_name," (",e.user_email,")"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["\uD83D\uDCC5 ",new Date(e.created_at).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-600 mb-2",children:["$",parseFloat(e.total_amount).toFixed(2)]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(getStatusColor(e.status)),children:e.status.toUpperCase()})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Items:"}),(0,r.jsx)("div",{className:"space-y-2",children:e.items&&e.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 bg-gray-50 px-3 rounded",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("span",{children:["Qty: ",e.quantity," \xd7 $",parseFloat(e.price).toFixed(2)]})]},t))})]}),e.shipping_address&&(0,r.jsxs)("div",{className:"border-t pt-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"\uD83D\uDCCD Shipping Address:"}),(0,r.jsx)("p",{className:"text-gray-600 bg-gray-50 p-3 rounded",children:e.shipping_address})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Update Status:"}),(0,r.jsx)("div",{className:"flex space-x-2",children:["pending","processing","shipped","delivered"].map(t=>(0,r.jsx)("button",{onClick:()=>updateOrderStatus(e.id,t),disabled:e.status===t,className:"px-4 py-2 rounded-lg font-semibold transition-all duration-200 ".concat(e.status===t?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-primary"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]},e.id))}),0===p.length&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCE6"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No orders match the selected filter"})]})]})}},9185:function(e,t,s){"use strict";s.d(t,{A6:function(){return d},I8:function(){return n},RB:function(){return l}});var r=s(7066);let a=r.Z.create({baseURL:"https://clothstore-98w2.onrender.com/api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n={login:e=>a.post("/auth/login",e),register:e=>a.post("/auth/register",e)},l={getAll:()=>a.get("/products"),getById:e=>a.get("/products/".concat(e)),create:e=>a.post("/products",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>a.put("/products/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>a.delete("/products/".concat(e))},d={create:e=>a.post("/orders",e),getAll:()=>a.get("/orders"),getAllAdmin:()=>a.get("/orders/admin/all"),getRevenue:()=>a.get("/orders/admin/revenue"),updateStatus:(e,t)=>a.put("/orders/".concat(e,"/status"),{status:t}),cancel:e=>a.put("/orders/".concat(e,"/cancel"))}},1163:function(e,t,s){e.exports=s(9974)}},function(e){e.O(0,[66,774,888,179],function(){return e(e.s=6376)}),_N_E=e.O()}]);